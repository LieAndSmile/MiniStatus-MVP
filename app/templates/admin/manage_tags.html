{% extends "base.html" %}

{% block header %}Manage Tags{% endblock %}

{% block content %}
<div class="max-w-xl mx-auto">
    <h2 class="text-lg font-semibold mb-4">Add Tag</h2>
    <form method="post" action="{{ url_for('admin.manage_tags') }}" class="space-y-2 mb-6">
        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
        <div class="flex gap-2">
            <input name="name" placeholder="Tag name" maxlength="32" required class="px-2 py-1 border rounded flex-1">
            <input name="color" placeholder="Color (e.g. #3b82f6)" maxlength="16" class="px-2 py-1 border rounded w-32">
        </div>
        <div class="flex items-center gap-2">
            <input type="checkbox" name="is_public" id="is_public" class="rounded">
            <label for="is_public" class="text-sm text-light-text dark:text-dark-text">Show on public dashboard</label>
        </div>
        <button type="submit" class="px-4 py-1 bg-light-primary dark:bg-dark-primary text-white rounded">Add</button>
    </form>
    <h2 class="text-lg font-semibold mb-2">Existing Tags</h2>
    <ul class="space-y-2">
        {% for tag in tags %}
        <li class="flex items-center gap-2 p-2 bg-light-card dark:bg-dark-card rounded">
            <span style="background:{{ tag.color }};padding:2px 8px;border-radius:8px;color:white;">{{ tag.name }}</span>
            {% if tag.is_public %}
            <span class="text-xs px-2 py-0.5 bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200 rounded">Public</span>
            {% else %}
            <span class="text-xs px-2 py-0.5 bg-gray-100 dark:bg-gray-800 text-gray-600 dark:text-gray-400 rounded">Admin Only</span>
            {% endif %}
            <form method="post" action="{{ url_for('admin.delete_tag', tag_id=tag.id) }}" style="display:inline;">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <button type="submit" onclick="return confirm('Delete tag?')" class="text-xs text-red-600 ml-2">Delete</button>
            </form>
        </li>
        {% else %}
        <li class="text-light-muted dark:text-dark-muted">No tags yet.</li>
        {% endfor %}
    </ul>
</div>
{% endblock %} 