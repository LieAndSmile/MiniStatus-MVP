
{% extends "base.html" %}

{% block title %}Admin - MiniStatus{% endblock %}

{% block content %}
<div class="bg-gray-800 p-6 rounded-xl shadow-xl">
  <h1 class="text-4xl font-bold text-yellow-400 mb-6 text-center">MiniStatus Admin</h1>

  <div class="flex justify-end space-x-4 mb-4">
    {% if has_docker %}
      <a href="/sync" class="bg-blue-500 hover:bg-blue-600 text-white px-3 py-2 rounded">Sync Docker</a>
    {% endif %}
    {% if has_systemctl %}
      <a href="/sync-systemd" class="bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-2 rounded">Sync Systemd</a>
    {% endif %}
    <a href="/logout" class="bg-red-500 hover:bg-red-600 text-white px-3 py-2 rounded">Logout</a>
  </div>

  <form method="POST" class="mb-6 space-y-4">
    <div class="grid grid-cols-3 gap-4">
      <input name="name" type="text" placeholder="Service Name" class="col-span-1 px-4 py-2 rounded bg-gray-700 text-white" required>
      <select name="status" class="col-span-1 px-4 py-2 rounded bg-gray-700 text-white">
        <option value="up">Up</option>
        <option value="degraded">Degraded</option>
        <option value="down">Down</option>
      </select>
      <input name="description" type="text" placeholder="Description" class="col-span-1 px-4 py-2 rounded bg-gray-700 text-white">
    </div>
    <button type="submit" class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded">Add Service</button>
  </form>

  <div class="space-y-2">
    {% for service in services %}
      <form method="POST" action="/update/{{ service.id }}" class="flex items-center justify-between bg-gray-700 px-4 py-2 rounded">
        <div>
          <strong>{{ service.name }}</strong> - {{ service.description }} <br>
          <small class="text-gray-400">Last updated: {{ service.last_updated }}</small>
        </div>
        <div class="flex space-x-2 items-center">
          <select name="status" class="px-2 py-1 rounded bg-gray-800 text-white">
            <option value="up" {% if service.status == 'up' %}selected{% endif %}>Up</option>
            <option value="degraded" {% if service.status == 'degraded' %}selected{% endif %}>Degraded</option>
            <option value="down" {% if service.status == 'down' %}selected{% endif %}>Down</option>
          </select>
          <button type="submit" class="bg-blue-500 hover:bg-blue-600 text-white px-2 py-1 rounded">Update</button>
      </form>
      <form method="POST" action="/delete/{{ service.id }}">
          <button type="submit" class="bg-red-500 hover:bg-red-600 text-white px-2 py-1 rounded">Delete</button>
      </form>
        </div>
    {% endfor %}
  </div>
</div>
{% endblock %}
